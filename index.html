<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
  <meta charset="utf-8">
  </head>
  <body>

<script type="text/javascript" src="jquery.min.js"></script>

<h2>Анкета генеалогического исследования</h2>
<p>
<b>Мы собираем информацию о вашей родословной для решения вопроса вашего права на репатриацию в Израиль.<br> Информация обрабатывается нашими сотрудниками и не подлежит передачи третьим лицам.<p></b>

<form enctype="multipart/form-data" method=post action=add.php>
	Ваши инициалы&nbsp<input type=text name = info[inicialy]>
	<p>
	Добавить другие варианты ФИО
	<p>
	

<table>

	<tr>
	<td>
	девичья фамилия
	<input id="id_dev_fam" type=checkbox name = dev_fam onchange = "f_rod('dev_fam');"> 
	&nbsp
	<td>
	смена фамилии
	<input id="id_smena_fam" type=checkbox name = smena_fam  onchange = "f_rod('smena_fam');"> 
	&nbsp
	<td>
	/имени
	<input id="id_smena_ima" type=checkbox name = smena_ima  onchange = "f_rod('smena_ima');"> 
	&nbsp
	<td>
	/отчества
	<input id="id_smena_otc" type=checkbox name = smena_otc  onchange = "f_rod('smena_otc');"> 
	&nbsp
	<td>
	русификация еврейских фамилии
	<input id="id_rus_fam" type=checkbox name = rus_fam  onchange = "f_rod('rus_fam');"> 
	&nbsp
	<td>
	/имени
	<input id="id_rus_ima" type=checkbox name = rus_ima  onchange = "f_rod('rus_ima');"> 
	&nbsp
	<td>
	/отчества
	<input id="id_rus_otc" type=checkbox name = rus_otc  onchange = "f_rod('rus_otc');"> 
	<td>

</table>
		<div class = dev_fam id = dev_fam></div>

		<div class = smena_fam id = smena_fam></div>
		<div class = smena_ima id = smena_ima></div>
		<div class = smena_otc id = smena_otc></div>

		<div class = rus_fam id = rus_fam></div>
		<div class = rus_ima id = rus_ima></div>
		<div class = rus_otc id = rus_otc></div>


</table>

<p>


	Дата рождения&nbsp<input type=text name = info[data_r]><p>
	Место рождения&nbsp<input type=text name = info[mesto_r]><p>
	Супруг/а
		&nbsp<input type=radio name = info[suprug] value=1 onclick="s();" > да
		&nbsp<input type=radio name = info[suprug] value=0 onclick="no_s();" > нет
		<br>

		<div class = suprug id = suprug></div>
		<!-- Если да, то Инициалы, дата Брака, место брака, дата рождения, место рождения, есть ли еврейские корни да/нет<br> --!>
	 	Есть ли еврейские корни
		&nbsp<input type=radio name = info[korni] value=1  onclick="f_korni();" > да
		&nbsp<input type=radio name = info[korni] value=0  onclick="no_f_korni();" > нет
		<p>

		<b>Дополнительная информация:</b><p>
	Партийный да/нет
		&nbsp<input type=radio name = info[part] value=1 > да
		&nbsp<input type=radio name = info[part] value=0 > нет
		<p>
	Был ли в эвакуации 
		&nbsp<input type=radio name = info[evac] value=1 onclick="e();" > да
		&nbsp<input type=radio name = info[evac] value=0 onclick="no_e();" > нет
		<div class = evac id = evac></div>
	<p>
	Был ли на фронте да/нет 
		&nbsp<input type=radio name = info[front] value=1 onclick="f();" > да
		&nbsp<input type=radio name = info[front] value=0 onclick="no_f();"  > нет
		<div class = front id = front></div>
		<p>

<!-- 
    Вместо: Укажите родственников по еврейской линии - Укажите, по какой линии еврейские корни: по материнской линии, по отцовской линии, по обеим линиям. 
						    --!>

<b>Укажите, по какой линии еврейские корни:</b><p>

<table>
<tr>
<td>
по материнской линии
&nbsp<input id="id_mat_lin" type=checkbox name = mat_lin  onchange = "f_rod('mat_lin');"> 
<td>
по отцовской линии
&nbsp<input id="id_otc_lin" type=checkbox name = otc_lin  onchange = "f_rod('otc_lin');"> 
<td>
</table>

		<div class = mat_lin id = mat_lin></div>
		<div class = otc_lin id = otc_lin></div>


<!--Каждая галочка создает соответствующий блок в анкете. 
«Другое» создает отдельный блок со свободным текстовым блоком --!>

		<div class = mama id = mama></div>
		<div class = papa id = papa></div>
		<div class = ded_m id = ded_m></div>
		<div class = ded_p id = ded_p></div>
		<div class = bab_m id = bab_m></div>
		<div class = bab_p id = bab_p></div>
		<div class = prabab_m id = prabab_m></div>
		<div class = drugoe id = drugoe></div>
<p>
<input type=submit value = Отпправить>
</form>

<script type="text/javascript" >

var arr = new Map([
  ['mama', {i:0,j:0,k:0,l:0}],
  ['papa', {i:0,j:0,k:0,l:0}],
  ['ded_m', {i:0,j:0,k:0,l:0}],
  ['ded_p', {i:0,j:0,k:0,l:0}],
  ['bab_m', {i:0,j:0,k:0,l:0}],
  ['bab_p', {i:0,j:0,k:0,l:0}],
  ['prabab_m', {i:0,j:0,k:0,l:0}],
]);  

 var fn = 0;

	function s()
	{
		var html = ' <p><b>Информация о супруге</b><p> Инициалы&nbsp<input type=text name = info[suprug][inicialy]><p> Дата рождения&nbsp<input type=text name = info[suprug][data_r]><p> Место рождения&nbsp<input type=text name = info[suprug][mesto_r]><p> Дата брака&nbsp<input type=text name = info[suprug][data_b]> <p> Место брака&nbsp<input type=text name = info[suprug][mesto_b]><p> ';
		document.getElementById('suprug').innerHTML=html; 
	}

	function no_s()
	{
		var html = '';
		document.getElementById('suprug').innerHTML=html; 
	}

	function e()
	{
		var html = 'Откуда&nbsp<input type=text name = info[otkuda]>&nbsp Куда<input type=text name = info[kuda]>';
		document.getElementById('evac').innerHTML=html; 
	}

	function no_e()
	{
		var html = '';
		document.getElementById('evac').innerHTML=html; 
	}

	function f()
	{
		var html = 'Где&nbsp<input type=text name = info[f_gde]>&nbsp В какой части<input type=text name = info[f_chast]>';
		document.getElementById('front').innerHTML=html; 
	}

	function no_f()
	{
		var html = '';
		document.getElementById('front').innerHTML=html; 
	}


	function ftc(fname, id)
{
	fetch(fname)
    .then(function (response) {
        switch (response.status) {
            // status "OK"
            case 200:
                return response.text();
            // status "Not Found"
            case 404:
                throw response;
        }
    })
    .then(function (template) {
        console.log(template);
	document.getElementById(id).innerHTML=template; 
    })
    .catch(function (response) {
        // "Not Found"
        console.log(response.statusText);
    });
}

	function f_rod(rod)
	{
	var chbox;
	chbox=document.getElementById('id_' + rod);
		if (chbox.checked) {
			ftc( rod + '.html',  rod );
		}
		else {
			var html = '';
			document.getElementById( rod ).innerHTML=html; 
		}

	}
/*
	function f_papa()
	{
	var chbox;
	chbox=document.getElementById('id_papa');
		if (chbox.checked) {
			ftc('papa.html', 'papa');
		}
		else {
			var html = '';
			document.getElementById('papa').innerHTML=html; 
		}

	}
*/


	function no_m()
	{
		var html = '';
		document.getElementById('mama').innerHTML=html; 
	}

	function no_l(rod)
	{
		var html = ' <table><tr> <td> Дата смерти <td> <input type=text name = rod['+rod+'][data_s][value]> <td> <input type=checkbox name = rod['+rod+'][data_s][netochno]> <tr> <td> Место смерти&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<td> <input type=text name = rod['+rod+'][mesto_s][value]> <td> <input type=checkbox name = rod['+rod+'][mesto_s][netochno]> </table>';
		document.getElementById('die_'+rod).innerHTML=html; 
}

	function l(rod)
	{
		var html = '';
		document.getElementById('die_'+rod).innerHTML=html; 
	}

	function e_s(rod)
	{
		var html = 'Откуда&nbsp<input type=text name = rod['+rod+'][suprug][evac][otkuda]>&nbsp Куда<input type=text name = rod['+rod+'][suprug][evac][kuda]>';
		document.getElementById('evac_s_'+rod).innerHTML=html; 
	}

	function no_e_s(rod)
	{
		var html = '';
		document.getElementById('evac_s_'+rod).innerHTML=html; 
	}

	function f_s(rod)
	{
		var html = 'Где&nbsp<input type=text name = rod['+rod+'][suprug][front][gde]>&nbsp В какой части<input type=text name = rod['+rod+'][suprug][front][chast]>';

		document.getElementById('front_s_'+rod).innerHTML=html; 
	}

	function no_f_s(rod)
	{
		var html = '';
		document.getElementById('front_s_'+rod).innerHTML=html; 
	}

	function add_file()
{
		i2 = fn+1;
		var s = 'add_files'+fn;
		var id = 'add_files'+i2;
	var html = 'Выберите файл для отправки <p> <input type="file" name="files['+fn+']"><p> </div> <div class = '+ id + ' id = ' + id + '>';
		fn++;
		document.getElementById(s).innerHTML=html; 
		console.log(s);
		console.log(id);
		console.log(html);
}

	function add_uch(rod)
	{
		i = arr.get(rod).i;
		i2 = i+1;
		var s = 'add_uch_'+rod+i;
		var id = 'add_uch_'+rod+i2;
		var html = ' <p> <table border = 1> <tr> <td> Период учебы     <td> Название учебного заведения <td> Не точно <tr> <td> <input type=text name = rod['+rod+'][ucheba]['+i2+'][period]> <td> <textarea name = rod['+rod+'][ucheba]['+i2+'][mesto]></textarea> <td> <input type=checkbox name = rod['+rod+'][ucheba]['+i2+'][netochno]> </table> <p>  </div> <div class = '+ id + ' id = ' + id + '>';
		console.log(i);
		console.log(s);
		console.log(id);
		console.log(html);
		console.log(arr.get(rod).i);
		document.getElementById(s).innerHTML=html; 
		arr.get(rod).i++;

	}

	function add_rab(rod)
	{
		j = arr.get(rod).j;
		var j2 = j+1;
		var s = 'add_rab_'+rod+j;
		var id = 'add_rab_'+rod+j2;
		var html = ' <p> <table border = 1> <tr> <td> Период работы <td> Должность <td> Название предприятия <br>(учреждения, организации) <td> Не точно <tr> <td> <input type=text name = rod['+rod+'][rabota]['+j2+'][period]> <td> <textarea name = rod['+rod+'][rabota]['+j2+'][dolzhnost]></textarea> <td> <textarea name = rod['+rod+'][rabota]['+j2+'][mesto]></textarea> <td> <input type=checkbox name = rod['+rod+'][rabota]['+j2+'][netochno]> </table> <p></div>  <div class = '+id+' id = '+id+' >';
		console.log(j);
		console.log(s);
		console.log(id);
		document.getElementById(s).innerHTML=html; 
		arr.get(rod).j++;

	}

	function add_adr(rod)
	{
		k = arr.get(rod).k;
		var k2 = k+1;
		var s = 'add_adr_'+rod+k;
		var id = 'add_adr_'+rod+k2;
		var html = ' <p> <table border = 1> <tr> <td> Город <td> район <td> улица <td> дом <td> корпус <td> квартира <td> период <td> Не точно <tr> <td> <input type=text name = rod['+rod+'][adres]['+k2+'][gorod]> <td> <input type=text  name = rod['+rod+'][adres]['+k2+'][raion]> <td> <input type=text name = rod['+rod+'][adres]['+k2+'][ulica]> <td> <input type=text name = rod['+rod+'][adres]['+k2+'][dom]> <td> <input type=text name = rod['+rod+'][adres]['+k2+'][korpus]> <td> <input type=text name = rod['+rod+'][adres]['+k2+'][kv]> <td> <input type=text name = rod['+rod+'][adres]['+k2+'][period]> <td> <input type=checkbox name = rod['+rod+'][adres]['+k2+'][netochno]> </table> <p> </div> <div class = '+id+' id = '+id+' > ';
		console.log(k);
		console.log(s);
		console.log(id);
		document.getElementById(s).innerHTML=html; 
		arr.get(rod).k++;
	}

	function add_bra(rod)
	{
		l = arr.get(rod).l;
		var l2 = l+1;
		var s = 'add_bra_'+rod+l;
		var id = 'add_bra_'+rod+l2;
		var html = ' <p> <table border = 1> <tr> <td> ФИО <td> жив <td> дата рождения <td> место рождения <tr> <td> <input type=text name = rod['+rod+'][brat]['+l2+'][fio]> <td> <input type=radio name = rod['+rod+'][brat]['+l2+'][live] value=1  > &nbsp да  &nbsp <input type=radio name = rod['+rod+'][brat]['+l2+'][live] value=0 > &nbsp нет <td> <input type=text name = rod['+rod+'][brat]['+l2+'][data_r]> <td> <input type=text name = rod['+rod+'][brat]['+l2+'][mesto_r]> </table> <p> </div> <div class = '+id+' id = '+id+' > ';
		document.getElementById(s).innerHTML=html; 
		arr.get(rod).l++;
	}
</script>
